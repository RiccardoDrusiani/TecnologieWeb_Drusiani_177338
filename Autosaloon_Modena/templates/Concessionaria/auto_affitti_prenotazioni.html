{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Auto Affittate e Prenotate</h2>
    <form method="get" class="mb-4 p-3 bg-light rounded shadow-sm">
        <div class="row g-3 align-items-end">
            <div class="col-md-2">
                <label for="marca" class="form-label">Marca</label>
                <input type="text" class="form-control" id="marca" name="marca" value="{{ request.GET.marca }}">
            </div>
            <div class="col-md-2">
                <label for="modello" class="form-label">Modello</label>
                <input type="text" class="form-control" id="modello" name="modello" value="{{ request.GET.modello }}">
            </div>
            <div class="col-md-2">
                <label for="anno" class="form-label">Anno</label>
                <input type="number" class="form-control" id="anno" name="anno" value="{{ request.GET.anno }}">
            </div>
            <div class="col-md-3">
                <label for="stato" class="form-label">Stato</label>
                <select class="form-select" id="stato" name="stato">
                    <option value="tutte" {% if request.GET.stato == 'tutte' or not request.GET.stato %}selected{% endif %}>Tutte</option>
                    <option value="affittate" {% if request.GET.stato == 'affittate' %}selected{% endif %}>Affittate</option>
                    <option value="prenotate" {% if request.GET.stato == 'prenotate' %}selected{% endif %}>Prenotate</option>
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100">Filtra</button>
            </div>
        </div>
    </form>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Marca</th>
                    <th>Modello</th>
                    <th>Anno</th>
                    <th>Stato</th>
                    <th>Data Inizio</th>
                    <th>Data Fine</th>
                </tr>
            </thead>
            <tbody>
                {% for item in auto_list %}
                <tr>
                    <td>{{ item.auto.marca }}</td>
                    <td>{{ item.auto.modello }}</td>
                    <td>{{ item.auto.anno }}</td>
                    <td>{{ item.stato }}</td>
                    <td>{{ item.data_inizio|date:'d/m/Y H:i' }}</td>
                    <td>{{ item.data_fine|date:'d/m/Y H:i' }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center">Nessuna auto trovata.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

